<template>
  <ClientOnly>
    <div class="page">
      <nav
        class="nav"
        :class="{ 'nav--expanded': isNavExpanded }"
      >
        <div class="logo">
          <div class="logo__heading">xChess</div>
          <div class="logo__underheading">By players, for players.</div>

          <svg
            @click="isNavExpanded = false"
            class="nav__cross"
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M3.39618 1.60269C2.90802 1.11453 2.11657 1.11453 1.62841 1.60269C1.14025 2.09084 1.14025 2.8823 1.62841 3.37045L8.25725 9.99929L1.62784 16.6287C1.13968 17.1169 1.13968 17.9083 1.62784 18.3965C2.11599 18.8846 2.90745 18.8846 3.3956 18.3965L10.025 11.7671L16.6544 18.3965C17.1426 18.8846 17.934 18.8846 18.4222 18.3965C18.9104 17.9083 18.9104 17.1169 18.4222 16.6287L11.7928 9.99929L18.4216 3.37046C18.9098 2.8823 18.9098 2.09084 18.4216 1.60269C17.9335 1.11453 17.142 1.11453 16.6539 1.60269L10.025 8.23153L3.39618 1.60269Z"
              fill="white"
            />
          </svg>
        </div>

        <div class="nav__hr"></div>

        <section class="section">
          <div class="section__heading">Play</div>
          <div
            class="item"
            @click="user ? createFastGame() : $togglePopup('SignInPopup')"
          >
            <svg
              class="item__img"
              width="18"
              height="19"
              viewBox="0 0 18 19"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clip-path="url(#clip0_1689_3750)">
                <path
                  d="M15.717 15.172V14.1302C15.717 14.0245 15.6548 13.9336 15.565 13.8916C15.5647 13.8914 15.5644 13.8911 15.564 13.891C15.3571 13.7954 15.1615 13.608 14.9827 13.3341C14.9031 13.2121 14.7398 13.1777 14.6178 13.2573C14.4958 13.3369 14.4615 13.5003 14.5411 13.6223C14.5984 13.7102 14.658 13.7916 14.7196 13.8665H8.69498C9.15167 13.3097 9.50395 12.3865 9.74601 11.1065C9.97021 9.92113 10.0501 8.67969 10.0662 7.96943H13.3499C13.3734 9.07039 13.5418 11.1463 14.0636 12.6184C14.102 12.7265 14.2036 12.7941 14.3122 12.7941C14.3414 12.7941 14.3712 12.7892 14.4003 12.7788C14.5375 12.7302 14.6094 12.5795 14.5607 12.4422C14.0574 11.0226 13.8974 8.99878 13.8766 7.93895C14.402 7.81787 14.795 7.34665 14.795 6.78501C14.795 6.47953 14.6787 6.20069 14.4881 5.99038C15.0646 5.74741 15.4823 5.20408 15.5426 4.54073L15.8822 0.787448C15.8888 0.713688 15.8642 0.640525 15.8142 0.585855C15.7644 0.53115 15.6937 0.5 15.6197 0.5H14.3277C14.1955 0.5 14.0838 0.597808 14.0663 0.728805L13.8467 2.37397C13.8238 2.54564 13.6759 2.67513 13.5026 2.67513C13.3113 2.67513 13.1556 2.51941 13.1556 2.32805V0.763682C13.1556 0.618059 13.0376 0.5 12.8919 0.5H10.5248C10.3792 0.5 10.2611 0.618059 10.2611 0.763682V2.32805C10.2611 2.51941 10.1054 2.67513 9.91406 2.67513C9.74088 2.67513 9.59297 2.54564 9.57005 2.37397L9.35042 0.728805C9.33291 0.597808 9.22121 0.5 9.08906 0.5H7.7967C7.72262 0.5 7.65199 0.53115 7.60203 0.585855C7.55207 0.640525 7.52739 0.713723 7.53411 0.787483L7.87405 4.54069C7.93396 5.20405 8.35163 5.74741 8.92828 5.99038C8.73769 6.20066 8.62139 6.47949 8.62139 6.78498C8.62139 7.34648 9.01424 7.81759 9.53943 7.93881C9.52498 8.62428 9.44816 9.84372 9.22789 11.0085C9.00243 12.2006 8.68316 13.056 8.29112 13.5317C8.11175 13.2717 7.97579 12.9648 7.88656 12.6149C7.81252 12.3246 7.77033 12.009 7.75761 11.6569C8.22749 11.5372 8.576 11.1105 8.576 10.6038C8.576 10.0965 8.22647 9.6693 7.75557 9.55026C8.13101 9.09634 8.34428 8.51997 8.34428 7.91969C8.34428 6.51054 7.19786 5.36408 5.78868 5.36408C5.15823 5.36408 4.55285 5.59563 4.08399 6.01611C3.97557 6.11333 3.9665 6.28004 4.06374 6.38847C4.16099 6.49689 4.32771 6.50593 4.4361 6.40872C4.80806 6.07514 5.28842 5.89145 5.78871 5.89145C6.90711 5.89145 7.81695 6.80132 7.81695 7.91969C7.81695 8.54324 7.52666 9.13399 7.03737 9.51714H4.54041C4.05112 9.13399 3.76082 8.54327 3.76082 7.91969C3.76082 7.65959 3.80938 7.40624 3.90511 7.16675C3.95918 7.03154 3.89337 6.87811 3.75815 6.82404C3.62287 6.76996 3.46951 6.83578 3.4154 6.97099C3.29467 7.27303 3.23343 7.59223 3.23343 7.91969C3.23343 8.51993 3.44669 9.0963 3.82214 9.55022C3.3512 9.66927 3.00163 10.0964 3.00163 10.6038C3.00163 11.1105 3.35018 11.5372 3.82007 11.6569C3.76933 12.9949 3.26908 13.8927 2.33062 14.3267C2.32998 14.3269 2.32956 14.3274 2.32896 14.3277C2.23959 14.3699 2.17761 14.4606 2.17761 14.566V15.475C1.66944 15.5945 1.28992 16.0514 1.28992 16.5955V18.2362C1.28992 18.3819 1.40798 18.4999 1.5536 18.4999H16.4464C16.5921 18.4999 16.7101 18.3819 16.7101 18.2362V16.4005C16.71 15.7981 16.2838 15.2935 15.717 15.172ZM8.39927 4.49316L8.08534 1.02736H8.85821L9.04733 2.44376C9.10509 2.8763 9.47769 3.20249 9.91406 3.20249C10.3962 3.20249 10.7885 2.81024 10.7885 2.32805V1.02736H12.6282V2.32805C12.6282 2.81024 13.0204 3.20249 13.5026 3.20249C13.939 3.20249 14.3116 2.8763 14.3693 2.44376L14.5585 1.02736H15.3311L15.0174 4.49312C14.9601 5.12441 14.439 5.60048 13.8052 5.60048H9.61146C8.9774 5.60045 8.45629 5.12445 8.39927 4.49316ZM9.14875 6.78498C9.14875 6.42268 9.44352 6.12792 9.80581 6.12792H13.6107C13.973 6.12792 14.2677 6.42268 14.2677 6.78498C14.2677 7.14696 13.9735 7.44147 13.6116 7.442C13.6112 7.442 13.6108 7.44193 13.6105 7.44193C13.6098 7.44193 13.6092 7.44203 13.6085 7.44203H9.80581C9.44352 7.44207 9.14875 7.14731 9.14875 6.78498ZM7.14934 15.4442H2.70494V14.8297H7.69946V15.172C7.49273 15.2164 7.30481 15.3117 7.14934 15.4442ZM8.22682 14.3938H15.1897V15.144H8.22682V14.3938ZM3.529 10.6039C3.529 10.2955 3.77992 10.0446 4.08832 10.0446H7.48928C7.79769 10.0446 8.0486 10.2955 8.0486 10.6039C8.0486 10.9123 7.79769 11.1632 7.48928 11.1632H4.08832C3.77992 11.1632 3.529 10.9123 3.529 10.6039ZM4.34651 11.6906H7.23147C7.26723 12.5832 7.48682 13.3153 7.88667 13.8736C7.87528 13.8795 7.86392 13.8855 7.85246 13.8908C7.85176 13.8912 7.85127 13.8917 7.8506 13.892C7.76133 13.9342 7.69942 14.0249 7.69942 14.1302V14.3023H3.31453C3.95535 13.7148 4.30127 12.8406 4.34651 11.6906ZM1.81725 16.5956C1.81725 16.2515 2.09717 15.9716 2.44126 15.9716H6.78198C6.73319 16.1055 6.7065 16.25 6.7065 16.4006V17.9727H1.81725V16.5956ZM16.1827 17.9726H7.23383V16.4006C7.23383 15.9985 7.561 15.6713 7.96314 15.6713H15.4533C15.8555 15.6713 16.1827 15.9985 16.1827 16.4006V17.9726Z"
                  fill="#454545"
                />
              </g>
              <defs>
                <clipPath id="clip0_1689_3750">
                  <rect
                    width="18"
                    height="18"
                    fill="white"
                    transform="translate(0 0.5)"
                  />
                </clipPath>
              </defs>
            </svg>
            <div class="item__text">Fast game</div>
          </div>
          <div
            class="item"
            @click="settingsPreset = 'Anyone'; user ? $togglePopup('GameSettingsPopup') : $togglePopup('SignInPopup')"
          >
            <svg
              class="item__img"
              width="18"
              height="19"
              viewBox="0 0 18 19"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clip-path="url(#clip0_1689_3756)">
                <path
                  d="M6.89062 14.2812C6.69656 14.2812 6.53906 14.4387 6.53906 14.6328C6.53906 14.8269 6.69656 14.9844 6.89062 14.9844C7.08469 14.9844 7.24219 14.8269 7.24219 14.6328C7.24219 14.4387 7.08469 14.2812 6.89062 14.2812Z"
                  fill="#454545"
                />
                <path
                  d="M11.1094 14.2812H8.29688C8.10271 14.2812 7.94531 14.4386 7.94531 14.6328C7.94531 14.827 8.10271 14.9844 8.29688 14.9844H11.1094C11.3035 14.9844 11.4609 14.827 11.4609 14.6328C11.4609 14.4386 11.3035 14.2812 11.1094 14.2812Z"
                  fill="#454545"
                />
                <path
                  d="M14.095 15.9225C14.1194 15.8858 14.1421 15.8476 14.1621 15.8075C14.3419 15.4478 14.3037 15.0246 14.0625 14.7031L12.9527 13.2234C13.1246 13.0302 13.2188 12.7841 13.2188 12.5234C13.2188 11.9419 12.7456 11.4688 12.1641 11.4688H12.1325L11.4856 4.61233L12.8489 4.1579C13.2804 4.01425 13.5703 3.61207 13.5703 3.15711V0.851562C13.5703 0.657395 13.4129 0.5 13.2188 0.5H11.8125C11.6184 0.5 11.4609 0.657395 11.4609 0.851562V1.90625H10.7578V0.851562C10.7578 0.657395 10.6004 0.5 10.4062 0.5H7.59375C7.39958 0.5 7.24219 0.657395 7.24219 0.851562V1.90625H6.53906V0.851562C6.53906 0.657395 6.38167 0.5 6.1875 0.5H4.78125C4.58708 0.5 4.42969 0.657395 4.42969 0.851562V3.15711C4.42969 3.61207 4.71962 4.01425 5.15102 4.1579L6.51438 4.61237L5.86754 11.4688H5.83594C5.55434 11.4688 5.2895 11.5785 5.0902 11.7777C4.89097 11.977 4.78125 12.2418 4.78125 12.5234C4.78125 12.7917 4.88208 13.0367 5.04759 13.223L3.93757 14.7031C3.69629 15.0246 3.65808 15.4478 3.83787 15.8074C3.85794 15.8476 3.88062 15.8858 3.90505 15.9225C3.37869 16.2265 3.02344 16.795 3.02344 17.4453V18.1484C3.02344 18.3426 3.18083 18.5 3.375 18.5H14.625C14.8191 18.5 14.9766 18.3426 14.9766 18.1484V17.4453C14.9766 16.795 14.6213 16.2265 14.095 15.9225ZM5.37325 3.49081C5.22946 3.44293 5.13281 3.30884 5.13281 3.15711V1.20312H5.83594V2.25781C5.83594 2.45198 5.99333 2.60938 6.1875 2.60938H7.59375C7.78792 2.60938 7.94531 2.45198 7.94531 2.25781V1.20312H10.0547V2.25781C10.0547 2.45198 10.2121 2.60938 10.4062 2.60938H11.8125C12.0066 2.60938 12.1641 2.45198 12.1641 2.25781V1.20312H12.8672V3.15711C12.8672 3.30881 12.7706 3.44293 12.6266 3.49085L11.0523 4.01562H6.94768L5.37325 3.49081ZM11.4262 11.4688H6.5738L7.21058 4.71875H10.7894L11.4262 11.4688ZM5.58742 12.275C5.6539 12.2085 5.74214 12.1719 5.83594 12.1719H6.1875H11.8125H12.1641C12.3579 12.1719 12.5156 12.3296 12.5156 12.5234C12.5156 12.6172 12.479 12.7055 12.4126 12.7719C12.3461 12.8384 12.2579 12.875 12.1641 12.875H5.83594C5.64209 12.875 5.48438 12.7173 5.48438 12.5234C5.48438 12.4296 5.52097 12.3414 5.58742 12.275ZM4.5 15.125L5.66016 13.5781H5.83594H12.1641H12.3398L13.5 15.1251C13.5816 15.2338 13.594 15.3714 13.5332 15.4931C13.4724 15.6148 13.3548 15.6875 13.2188 15.6875H4.78125C4.6452 15.6875 4.52763 15.6148 4.46678 15.4931C4.40596 15.3714 4.41837 15.2338 4.5 15.125ZM14.2734 17.7969H3.72656V17.4453C3.72656 16.8638 4.1997 16.3906 4.78125 16.3906H13.2188C13.8003 16.3906 14.2734 16.8638 14.2734 17.4453V17.7969Z"
                  fill="#454545"
                />
              </g>
              <defs>
                <clipPath id="clip0_1689_3756">
                  <rect
                    width="18"
                    height="18"
                    fill="white"
                    transform="translate(0 0.5)"
                  />
                </clipPath>
              </defs>
            </svg>

            <div class="item__text">New game</div>
          </div>
          <NuxtLink
            class="item"
            to="events/arena"
          >
            <svg
              class="item__img"
              width="19"
              height="19"
              viewBox="0 0 19 19"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M11.71 9.9926V12.3131C11.71 14.2511 10.9365 15.0246 8.99848 15.0246H6.68648C4.75698 15.0246 3.97498 14.2511 3.97498 12.3131V9.9926C3.97498 8.0631 4.74848 7.2896 6.68648 7.2896H9.00698C10.9365 7.2896 11.71 8.0631 11.71 9.9926Z"
                stroke="white"
                stroke-opacity="0.2"
                stroke-width="0.975"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M15.025 6.67827V8.99877C15.025 10.9368 14.2515 11.7103 12.3135 11.7103H11.71V9.99327C11.71 8.06377 10.9365 7.29027 8.99854 7.29027H7.29004V6.67827C7.29004 4.74027 8.06354 3.97527 10.0015 3.97527H12.322C14.2515 3.97527 15.025 4.74877 15.025 6.67827Z"
                stroke="white"
                stroke-opacity="0.2"
                stroke-width="0.975"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M18 12.0501C18 15.3396 15.3395 18.0001 12.05 18.0001L12.9425 16.5126"
                stroke="white"
                stroke-opacity="0.2"
                stroke-width="0.975"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M1 6.95C1 3.6605 3.6605 1 6.95 1L6.0575 2.4875"
                stroke="white"
                stroke-opacity="0.2"
                stroke-width="0.975"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>

            <div class="item__text">Arena game</div>
          </NuxtLink>
          <div
            class="item"
            v-if="false"
          >
            <svg
              class="item__img"
              width="18"
              height="19"
              viewBox="0 0 18 19"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clip-path="url(#clip0_1689_3776)">
                <path
                  d="M17.0337 3.62984C16.993 3.17332 16.6167 2.82905 16.1583 2.82905H13.8845V2.49395H13.9288C14.2535 2.49395 14.5176 2.2298 14.5176 1.90514V1.08881C14.5176 0.764154 14.2535 0.5 13.9288 0.5H7.23631C7.0907 0.5 6.97265 0.618015 6.97265 0.763662C6.97265 0.909309 7.0907 1.02732 7.23631 1.02732H13.9288C13.9627 1.02732 13.9903 1.05489 13.9903 1.08881V1.90514C13.9903 1.93907 13.9627 1.96663 13.9288 1.96663H4.0711C4.03718 1.96663 4.00958 1.93907 4.00958 1.90514V1.08881C4.00958 1.05489 4.03718 1.02732 4.0711 1.02732H6.00009C6.1457 1.02732 6.26375 0.909309 6.26375 0.763662C6.26375 0.618015 6.1457 0.5 6.00009 0.5H4.0711C3.74641 0.5 3.48226 0.764154 3.48226 1.08881V1.90514C3.48226 2.2298 3.74641 2.49395 4.0711 2.49395H4.11536V2.82905H1.84154C1.38319 2.82905 1.00686 3.17332 0.966148 3.62984C0.960804 3.68954 0.842332 5.11061 1.42425 6.68449C1.95667 8.12451 3.17817 9.96318 5.97685 10.6848C6.4274 11.0408 6.94186 11.3193 7.50001 11.4998L7.63272 11.7189C7.88355 12.133 8.01612 12.6225 8.01612 13.1345C8.01612 13.4473 7.96627 13.7529 7.86798 14.0427L7.68369 14.5857H7.07056C6.44135 14.5857 5.92943 15.0977 5.92943 15.7269V16.2792H4.96984C4.69904 16.2792 4.47872 16.4996 4.47872 16.7704V18.0089C4.47872 18.2797 4.69904 18.5 4.96984 18.5H13.0301C13.3009 18.5 13.5212 18.2797 13.5212 18.0089V16.7704C13.5212 16.4996 13.3009 16.2792 13.0301 16.2792H12.0705V15.7269C12.0705 15.0977 11.5585 14.5857 10.9293 14.5857H10.3162L10.1319 14.0427C10.0336 13.7529 9.98374 13.4474 9.98374 13.1345C9.98374 12.6225 10.1163 12.133 10.3671 11.7189L10.4999 11.4998C11.058 11.3193 11.5724 11.0408 12.023 10.6848C14.8217 9.96318 16.0432 8.12451 16.5756 6.68449C17.1575 5.11061 17.0391 3.68957 17.0337 3.62984ZM4.21299 7.82467C3.72138 7.36442 3.34477 6.79347 3.08719 6.11298C2.90821 5.64014 2.79108 5.12678 2.73894 4.5868H4.11536V6.8512C4.11536 7.18447 4.14908 7.51 4.21299 7.82467ZM1.91888 6.50165C1.37767 5.03787 1.48651 3.73158 1.4914 3.67671C1.50767 3.49411 1.65821 3.35641 1.84154 3.35641H4.11536V4.05951H2.71711C2.57466 4.05951 2.43798 4.11987 2.34208 4.22512C2.24607 4.33052 2.19861 4.4724 2.21186 4.61443C2.26737 5.20936 2.39593 5.77637 2.594 6.29969C2.98517 7.33317 3.61834 8.14015 4.48505 8.71465C4.65559 9.12625 4.88083 9.50965 5.15173 9.85575C3.24148 9.06395 2.34183 7.64552 1.91888 6.50165ZM12.9939 16.8065V17.9727H5.00601V16.8065H12.9939ZM10.9293 15.1131C11.2678 15.1131 11.5431 15.3884 11.5431 15.7269V16.2792H6.45675V15.7269C6.45675 15.3884 6.73212 15.1131 7.07056 15.1131H10.9293ZM9.63258 14.2121L9.75935 14.5857H8.24048L8.36728 14.2121C8.48414 13.8676 8.54341 13.5051 8.54341 13.1345C8.54341 12.6159 8.4275 12.1152 8.20708 11.6711C8.46522 11.7134 8.72998 11.7358 8.99993 11.7358C9.26985 11.7358 9.53464 11.7134 9.79275 11.6711C9.57232 12.1152 9.45642 12.6159 9.45642 13.1345C9.45645 13.5051 9.51569 13.8676 9.63258 14.2121ZM8.99993 11.2084C6.59734 11.2084 4.64269 9.25376 4.64269 6.8512V2.49395H13.3572V6.8512C13.3572 9.25379 11.4025 11.2084 8.99993 11.2084ZM16.081 6.50165C15.6581 7.64556 14.7584 9.06413 12.848 9.85593C13.1194 9.50919 13.345 9.12505 13.5157 8.71262C14.2599 8.21844 14.833 7.55289 15.2277 6.71951C15.29 6.58792 15.2338 6.43067 15.1022 6.36838C14.9707 6.30608 14.8135 6.36219 14.7511 6.49381C14.5068 7.00978 14.1845 7.45432 13.7867 7.82629C13.8508 7.51113 13.8846 7.18506 13.8846 6.85123V4.58683H15.261C15.2348 4.85812 15.1912 5.12716 15.1314 5.38689C15.0987 5.52881 15.1873 5.67034 15.3292 5.70297C15.471 5.7358 15.6126 5.64711 15.6453 5.50519C15.7119 5.21589 15.7599 4.9162 15.7881 4.61443C15.8013 4.4724 15.7539 4.33052 15.6579 4.22512C15.562 4.11987 15.4253 4.05951 15.2828 4.05951H13.8846V3.35641H16.1584C16.3417 3.35641 16.4923 3.49411 16.5085 3.67674C16.5134 3.73158 16.6222 5.03787 16.081 6.50165Z"
                  fill="#454545"
                />
                <path
                  d="M10.7337 5.62077L9.97767 5.51091C9.94473 5.50609 9.91629 5.48542 9.90156 5.45561L9.56344 4.77051C9.45682 4.55445 9.2409 4.42023 8.99995 4.42023C8.75899 4.42023 8.54307 4.55445 8.43645 4.77051L8.09833 5.45561C8.0836 5.48546 8.05516 5.50613 8.02222 5.51091L7.26617 5.62077C7.02772 5.6554 6.83335 5.81925 6.75889 6.04843C6.68443 6.2776 6.74535 6.52443 6.91789 6.69264L7.46497 7.22587C7.48881 7.24911 7.49967 7.28254 7.49405 7.31538L7.36489 8.0684C7.32414 8.30587 7.41994 8.54134 7.61487 8.68298C7.80977 8.82454 8.06338 8.84293 8.2767 8.73082L8.95291 8.3753C8.98237 8.3598 9.01752 8.3598 9.04698 8.3753L9.72322 8.73082C9.816 8.77958 9.91636 8.80366 10.0162 8.80366C10.146 8.80366 10.2749 8.76299 10.385 8.68294C10.5799 8.5413 10.6757 8.3058 10.635 8.06836L10.5058 7.31534C10.5002 7.28251 10.5111 7.24908 10.5349 7.22587L11.082 6.69257C11.2546 6.52439 11.3155 6.27753 11.241 6.04839C11.1666 5.81925 10.9721 5.6554 10.7337 5.62077ZM10.7139 6.31501L10.1668 6.84831C10.0187 6.99269 9.95113 7.2006 9.98608 7.4045L10.1152 8.15751C10.1245 8.21141 10.094 8.24259 10.075 8.2564C10.0561 8.27022 10.017 8.28963 9.96857 8.2641L9.29233 7.90858C9.20078 7.86045 9.10035 7.83637 8.99991 7.83637C8.89947 7.83637 8.79903 7.86045 8.70749 7.90858L8.03129 8.2641C7.98291 8.28959 7.94382 8.27019 7.9248 8.2564C7.90582 8.24259 7.87537 8.21144 7.88458 8.15751L8.01374 7.4045C8.04872 7.2006 7.98115 6.99269 7.83301 6.84827L7.28593 6.31504C7.24677 6.27687 7.25306 6.23373 7.26034 6.21141C7.26758 6.18908 7.28783 6.15048 7.34193 6.14261L8.09797 6.03275C8.30272 6.00297 8.47958 5.87448 8.57112 5.689L8.90924 5.0039C8.93343 4.95486 8.97643 4.94755 8.99987 4.94755C9.02332 4.94755 9.06632 4.95486 9.0905 5.0039L9.42862 5.689C9.52017 5.87448 9.69703 6.00301 9.90177 6.03275L10.6579 6.14261C10.712 6.15048 10.7322 6.18908 10.7394 6.21141C10.7468 6.23373 10.7531 6.27687 10.7139 6.31501Z"
                  fill="#454545"
                />
              </g>
              <defs>
                <clipPath id="clip0_1689_3776">
                  <rect
                    width="18"
                    height="18"
                    fill="white"
                    transform="translate(0 0.5)"
                  />
                </clipPath>
              </defs>
            </svg>

            <div class="item__text">Tournaments</div>
          </div>
        </section>

        <NuxtLink
          v-if="lobby?.sidebarBanner"
          :to="lobby?.sidebarBanner?.link"
        >
          <img
            class="nav__banner"
            :src="lobby?.sidebarBanner?.image"
          />
        </NuxtLink>

        <section class="section">
          <div class="section__heading">Learn</div>
          <div class="item item--inactive">
            <svg
              class="item__img"
              width="18"
              height="19"
              viewBox="0 0 18 19"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M17.7778 8.96292L14.6437 5.82881C14.5667 5.75189 14.5636 5.62884 14.6367 5.55455C14.8668 5.32073 15.1844 5.18457 15.531 5.17128C15.8332 5.15968 16.1011 5.04528 16.3058 4.8405C16.5934 4.55295 16.7124 4.14057 16.6409 3.67925C16.575 3.25365 16.351 2.83146 16.0099 2.49041C15.2804 1.76098 14.2262 1.6282 13.6599 2.1945C13.455 2.39932 13.3407 2.66724 13.3291 2.96934C13.3158 3.31602 13.1797 3.63362 12.9458 3.86371C12.8715 3.93684 12.7485 3.93361 12.6715 3.85665L9.53747 0.722539C9.39392 0.579031 9.20313 0.5 9.00017 0.5C8.79718 0.5 8.60639 0.578996 8.46284 0.722539L5.29527 3.89012C5.28852 3.89687 5.28215 3.9039 5.27604 3.91125C5.00364 4.2389 5.02565 4.71337 5.32708 5.01477C5.66746 5.35522 6.13012 5.55325 6.6298 5.57245C6.77471 5.57804 6.89568 5.62828 6.98923 5.72176C7.13309 5.86562 7.19005 6.08826 7.14972 6.34877C7.10388 6.645 6.94177 6.94495 6.69336 7.1934C6.44491 7.44181 6.14496 7.60392 5.84873 7.64976C5.58822 7.69012 5.36558 7.63306 5.22168 7.48924C5.12817 7.39576 5.07797 7.27479 5.07241 7.12977C5.05325 6.63016 4.85518 6.16757 4.51476 5.82712C4.21323 5.52562 3.73876 5.50368 3.41114 5.77607C3.40382 5.78216 3.39676 5.78859 3.39004 5.7953L1.83389 7.35146C1.7126 7.47278 1.7126 7.66938 1.83389 7.79067C1.95518 7.91192 2.1518 7.91192 2.27306 7.79067L3.81677 6.24696C3.89457 6.18927 4.00616 6.19703 4.07552 6.26636C4.30491 6.49576 4.43854 6.81083 4.45166 7.1536C4.46326 7.45573 4.57762 7.72366 4.78244 7.92845C5.06998 8.21599 5.48247 8.33499 5.94369 8.26359C6.36929 8.19767 6.79148 7.97362 7.13246 7.63261C7.47344 7.29163 7.69756 6.8694 7.76348 6.44383C7.83492 5.98248 7.71591 5.57009 7.42837 5.28255C7.22352 5.07773 6.95563 4.96333 6.6536 4.95184C6.31082 4.93865 5.99572 4.80506 5.76629 4.57559C5.69696 4.50627 5.6893 4.39468 5.74692 4.31688L8.90202 1.16178C8.95612 1.10761 9.04408 1.10768 9.09822 1.16178L12.2323 4.29589C12.5494 4.61296 13.0649 4.61775 13.3814 4.30651C13.7285 3.965 13.9303 3.49858 13.9497 2.99321C13.9553 2.84823 14.0055 2.72729 14.099 2.63377C14.4177 2.31505 15.0916 2.45061 15.5707 2.92965C15.8191 3.17813 15.9812 3.47805 16.0271 3.77428C16.0674 4.03479 16.0104 4.25743 15.8665 4.40132C15.7731 4.49487 15.6521 4.54508 15.5072 4.55063C15.0018 4.57 14.5354 4.77184 14.1939 5.11897C13.8825 5.43541 13.8873 5.95087 14.2045 6.26805L17.3386 9.40216C17.3927 9.45627 17.3927 9.54426 17.3386 9.5983L16.6371 10.2998C16.5158 10.4211 16.5158 10.6177 16.6371 10.739C16.6977 10.7996 16.7772 10.83 16.8567 10.83C16.9361 10.83 17.0157 10.7997 17.0763 10.739L17.7778 10.0375C18.074 9.74124 18.074 9.25922 17.7778 8.96292Z"
                fill="#454545"
              />
              <path
                d="M15.7081 11.2289L14.2045 12.7325C14.1269 12.81 14.0007 12.81 13.9232 12.7324C13.6938 12.5031 13.5602 12.188 13.547 11.8452C13.5354 11.5431 13.4211 11.2751 13.2163 11.0703C12.6499 10.5041 11.5957 10.6367 10.8662 11.3662C10.1367 12.0958 10.004 13.15 10.5703 13.7163C10.7751 13.9211 11.043 14.0355 11.3452 14.0471C11.6879 14.0602 12.003 14.1939 12.2324 14.4233C12.31 14.5008 12.31 14.627 12.2325 14.7045L9.09837 17.8387C9.04426 17.8928 8.95619 17.8928 8.90216 17.8387L5.76805 14.7046C5.61315 14.5497 5.40721 14.4643 5.18818 14.4643C4.96916 14.4643 4.76318 14.5497 4.60835 14.7045L4.56124 14.7516C4.23942 15.0734 4.05826 15.5134 4.05113 15.9904C4.04884 16.143 3.9985 16.2696 3.90136 16.3667C3.58274 16.6853 2.90876 16.5497 2.42972 16.0708C1.95068 15.5917 1.81519 14.9177 2.13381 14.5991C2.22732 14.5056 2.34826 14.4553 2.49325 14.4498C2.99862 14.4304 3.465 14.2286 3.80654 13.8815C4.11789 13.565 4.11307 13.0496 3.79593 12.7324L0.661816 9.59827C0.607746 9.5442 0.607746 9.4562 0.661816 9.40213L1.34504 8.7189C1.46633 8.59761 1.46633 8.40102 1.34504 8.27973C1.22375 8.15848 1.02713 8.15844 0.905871 8.27977L0.222645 8.96296C0.0790313 9.10643 0 9.29726 0 9.50025C0 9.70324 0.0790312 9.894 0.222574 10.0376L3.35668 13.1717C3.43361 13.2486 3.4368 13.3717 3.36371 13.4459C3.13362 13.6798 2.81602 13.8159 2.46934 13.8292C2.16724 13.8408 1.89932 13.9552 1.69457 14.16C1.12823 14.7263 1.26098 15.7806 1.99048 16.5101C2.71997 17.2394 3.7742 17.3723 4.34046 16.806C4.55277 16.5937 4.66741 16.315 4.67209 15.9998C4.67677 15.6852 4.79338 15.3979 5.00034 15.191L5.04745 15.1438C5.085 15.1063 5.13499 15.0856 5.18811 15.0856C5.24123 15.0856 5.29123 15.1063 5.32877 15.1439L8.46292 18.278C8.61103 18.4261 8.80562 18.5001 9.00018 18.5001C9.19477 18.5001 9.38932 18.4261 9.5375 18.278L12.6718 15.1437C12.9913 14.8239 12.9913 14.3038 12.6716 13.9841C12.3312 13.6437 11.8686 13.4456 11.369 13.4265C11.224 13.4209 11.1031 13.3706 11.0095 13.2771C10.6909 12.9585 10.8264 12.2845 11.3054 11.8055C11.7845 11.3264 12.4585 11.1909 12.7771 11.5096C12.8706 11.6031 12.9208 11.7241 12.9264 11.8691C12.9456 12.3687 13.1436 12.8313 13.484 13.1717C13.8037 13.4914 14.3239 13.4915 14.6436 13.1719L16.1473 11.6682C16.2686 11.5469 16.2686 11.3503 16.1473 11.229C16.0259 11.1077 15.8293 11.1077 15.7081 11.2289Z"
                fill="#454545"
              />
            </svg>

            <div class="item__text">Puzzles</div>
            <div class="item__soon">Soon</div>
          </div>
          <div class="item item--inactive">
            <svg
              class="item__img"
              width="18"
              height="19"
              viewBox="0 0 18 19"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M3.55549 12.7915H0.685582C0.307582 12.7915 0 13.0991 0 13.4771V16.347C0 16.725 0.307582 17.0326 0.685582 17.0326H3.55549C3.93353 17.0326 4.24107 16.725 4.24107 16.347V13.4771C4.24107 13.0991 3.93353 12.7915 3.55549 12.7915ZM3.7137 16.347C3.7137 16.4327 3.64124 16.5052 3.55549 16.5052H0.685582C0.599836 16.5052 0.527379 16.4327 0.527379 16.347V13.4771C0.527379 13.3913 0.599836 13.3189 0.685582 13.3189H3.55549C3.64124 13.3189 3.7137 13.3913 3.7137 13.4771V16.347Z"
                fill="#454545"
              />
              <path
                d="M16.9745 7.78659H7.51571C6.95025 7.78659 6.49023 8.24661 6.49023 8.81206V11.0022C6.49023 11.5677 6.95025 12.0277 7.51571 12.0277H16.9745C17.54 12.0277 18 11.5677 18 11.0022V8.81206C18 8.24661 17.5399 7.78659 16.9745 7.78659ZM17.4726 11.0022C17.4726 11.2769 17.2492 11.5003 16.9745 11.5003H7.51571C7.24103 11.5003 7.01761 11.2769 7.01761 11.0022V8.81206C7.01761 8.53742 7.24103 8.31397 7.51571 8.31397H16.9745C17.2492 8.31397 17.4726 8.53739 17.4726 8.81206V11.0022Z"
                fill="#454545"
              />
              <path
                d="M8.02441 4.90228C8.02441 5.0479 8.14247 5.16595 8.28809 5.16595H16.2022C16.3478 5.16595 16.4659 5.0479 16.4659 4.90228C16.4659 4.75667 16.3478 4.63861 16.2022 4.63861H8.28809C8.14247 4.63861 8.02441 4.75663 8.02441 4.90228Z"
                fill="#454545"
              />
              <path
                d="M16.2022 9.64349H8.28809C8.14247 9.64349 8.02441 9.76151 8.02441 9.90717C8.02441 10.0528 8.14247 10.1708 8.28809 10.1708H16.2022C16.3478 10.1708 16.4659 10.0528 16.4659 9.90717C16.4659 9.76151 16.3478 9.64349 16.2022 9.64349Z"
                fill="#454545"
              />
              <path
                d="M16.4659 14.912C16.4659 14.7664 16.3478 14.6484 16.2022 14.6484H8.28809C8.14247 14.6484 8.02441 14.7664 8.02441 14.912C8.02441 15.0577 8.14247 15.1757 8.28809 15.1757H16.2022C16.3478 15.1757 16.4659 15.0577 16.4659 14.912Z"
                fill="#454545"
              />
              <path
                d="M5.72551 7.18778C5.34913 6.86557 4.78079 6.90966 4.45866 7.28608L3.84448 8.00358C3.66697 7.86478 3.44718 7.78656 3.21564 7.78656H1.02547C0.46002 7.7866 0 8.24662 0 8.81207V11.0022C0 11.5677 0.46002 12.0277 1.02547 12.0277H3.2156C3.78105 12.0277 4.24107 11.5677 4.24107 11.0022V10.3037L5.82377 8.45474C5.97983 8.27242 6.05559 8.04021 6.037 7.80091C6.01843 7.56163 5.90783 7.34391 5.72551 7.18778ZM3.71373 11.0022C3.7137 11.2769 3.49028 11.5003 3.2156 11.5003H1.02547C0.750832 11.5003 0.527379 11.2769 0.527379 11.0022V8.81207C0.527379 8.53743 0.750797 8.31398 1.02547 8.31398C3.4053 8.31398 3.32933 8.28346 3.50089 8.40493L2.91428 9.09026C2.72851 8.84881 2.71354 8.8249 2.65124 8.76531C2.12024 8.25755 1.23448 8.57195 1.13963 9.29895C1.10858 9.53696 1.17211 9.77279 1.31843 9.96298L2.16492 11.0634C2.20637 11.1172 2.25316 11.1656 2.30425 11.208C2.47131 11.3466 2.68211 11.4137 2.85395 11.4137C3.34174 11.4137 3.53134 11.1328 3.7137 10.9198L3.71373 11.0022ZM5.42313 8.11176L3.15896 10.7569C3.00635 10.9352 2.72682 10.929 2.58289 10.7418L1.7364 9.64141C1.48644 9.31667 1.87351 8.88822 2.22202 9.09768C2.30309 9.14641 2.30611 9.16469 2.69434 9.66935C2.79591 9.80137 2.99429 9.80784 3.10366 9.68004L4.05408 8.56977C4.05411 8.5697 4.05415 8.56967 4.05418 8.5696L4.85923 7.62906C4.99233 7.47364 5.22703 7.45546 5.38253 7.58846C5.45783 7.65293 5.50354 7.7429 5.5112 7.84172C5.5189 7.94055 5.48761 8.03645 5.42313 8.11176Z"
                fill="#454545"
              />
              <path
                d="M1.02547 7.0228H3.2156C3.78105 7.0228 4.24107 6.56278 4.24107 5.99733V5.29884L5.82377 3.44987C6.14595 3.07349 6.10189 2.50515 5.72551 2.18298C5.34909 1.86077 4.78083 1.90489 4.45862 2.28127L3.84444 2.99878C3.66694 2.85995 3.44711 2.78176 3.2156 2.78176H1.02547C0.46002 2.78176 0 3.24174 0 3.8072V5.99733C0 6.56278 0.46002 7.0228 1.02547 7.0228ZM4.85923 2.62419C4.99233 2.46873 5.22703 2.45052 5.38253 2.58355C5.53795 2.71665 5.55616 2.95142 5.4231 3.10688L3.15896 5.75201C3.0073 5.92919 2.72767 5.92519 2.58289 5.73696L1.73644 4.63657C1.54118 4.38281 1.73883 4.0137 2.06174 4.04109C2.26951 4.0587 2.31212 4.16758 2.69438 4.66445C2.79773 4.79878 2.99658 4.80033 3.1037 4.67513C3.29636 4.45006 4.68098 2.83249 4.85923 2.62419ZM0.527379 3.8072C0.527379 3.53252 0.750797 3.3091 1.02547 3.3091C3.4053 3.3091 3.32933 3.27859 3.50093 3.40005L2.91428 4.08539C2.73045 3.8464 2.71041 3.8144 2.63514 3.74581C2.09921 3.25785 1.23328 3.57636 1.13963 4.29404C1.10858 4.53205 1.17211 4.76788 1.31843 4.95807L2.16489 6.05843C2.51575 6.51454 3.19233 6.5239 3.55961 6.09488L3.71366 5.91488V5.99729C3.71366 6.27197 3.49024 6.49538 3.21557 6.49538H1.02547C0.750832 6.49538 0.527379 6.27197 0.527379 5.99729V3.8072Z"
                fill="#454545"
              />
              <path
                d="M16.9745 2.78177H12.8604C12.7148 2.78177 12.5967 2.89982 12.5967 3.04544C12.5967 3.19106 12.7148 3.30911 12.8604 3.30911H16.9745C17.2492 3.30911 17.4726 3.53253 17.4726 3.80721V5.99733C17.4726 6.27201 17.2492 6.49543 16.9745 6.49543H7.51571C7.24103 6.49543 7.01761 6.27201 7.01761 5.99733V3.80721C7.01761 3.53253 7.24103 3.30911 7.51571 3.30911H11.6299C11.7755 3.30911 11.8935 3.19106 11.8935 3.04544C11.8935 2.89982 11.7755 2.78177 11.6299 2.78177H7.51571C6.95025 2.78177 6.49023 3.24179 6.49023 3.80724V5.99737C6.49023 6.56282 6.95025 7.02284 7.51571 7.02284H16.9745C17.54 7.02284 18 6.56282 18 5.99737V3.80721C18 3.24175 17.5399 2.78177 16.9745 2.78177Z"
                fill="#454545"
              />
              <path
                d="M16.9745 12.7915H7.51571C6.95025 12.7915 6.49023 13.2515 6.49023 13.817V16.0071C6.49023 16.5726 6.95025 17.0326 7.51571 17.0326H11.6299C11.7755 17.0326 11.8935 16.9146 11.8935 16.7689C11.8935 16.6233 11.7755 16.5053 11.6299 16.5053H7.51571C7.24103 16.5053 7.01761 16.2819 7.01761 16.0071V13.817C7.01761 13.5423 7.24103 13.3189 7.51571 13.3189H16.9745C17.2492 13.3189 17.4726 13.5423 17.4726 13.817V16.0071C17.4726 16.2818 17.2492 16.5053 16.9745 16.5053H12.8604C12.7148 16.5053 12.5967 16.6233 12.5967 16.7689C12.5967 16.9146 12.7148 17.0326 12.8604 17.0326H16.9745C17.54 17.0326 18 16.5726 18 16.0071V13.817C18 13.2515 17.5399 12.7915 16.9745 12.7915Z"
                fill="#454545"
              />
            </svg>

            <div class="item__text">Missions</div>
            <div class="item__soon">Soon</div>
          </div>
          <NuxtLink
            to="https://twitter.com/danger_valley"
            class="item"
          >
            <svg
              class="item__img"
              width="18"
              height="19"
              viewBox="0 0 18 19"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clip-path="url(#clip0_1689_3813)">
                <path
                  d="M16.9453 0.5H2.95312C2.75896 0.5 2.60156 0.65743 2.60156 0.851562V3.52344H1.05469C0.86052 3.52344 0.703125 3.68087 0.703125 3.875V17.1992C0.703125 17.9164 1.28665 18.5 2.00391 18.5H15.9961C16.7134 18.5 17.2969 17.9165 17.2969 17.1992V12.4868C17.2969 12.2927 17.1395 12.1352 16.9453 12.1352C16.7511 12.1352 16.5938 12.2927 16.5938 12.4868V17.1992C16.5938 17.5288 16.3256 17.7969 15.9961 17.7969H3.15868C3.25174 17.6178 3.30469 17.4146 3.30469 17.1992V1.20312H16.5938V9.32274C16.5938 9.51687 16.7511 9.6743 16.9453 9.6743C17.1395 9.6743 17.2969 9.51687 17.2969 9.32274V0.851562C17.2969 0.65743 17.1395 0.5 16.9453 0.5ZM1.40625 17.1992V4.22656H2.60156V17.1992C2.60156 17.5288 2.33346 17.7969 2.00391 17.7969C1.67435 17.7969 1.40625 17.5288 1.40625 17.1992Z"
                  fill="#454545"
                />
                <path
                  d="M4.5369 5.73895C4.73107 5.73895 4.88846 5.58152 4.88846 5.38739V4.12901L5.86117 5.53754C5.96245 5.68372 6.13208 5.74553 6.29341 5.69518C6.45756 5.64386 6.56366 5.49142 6.56366 5.30681V2.99677C6.56366 2.80263 6.40626 2.6452 6.2121 2.6452C6.01793 2.6452 5.86053 2.80263 5.86053 2.99677V4.2993L4.82617 2.80151C4.73873 2.67487 4.57912 2.62 4.43224 2.66566C4.28536 2.71147 4.1853 2.84746 4.1853 3.0013V5.38743C4.18534 5.58152 4.34273 5.73895 4.5369 5.73895Z"
                  fill="#454545"
                />
                <path
                  d="M8.62574 3.34833C8.81991 3.34833 8.9773 3.1909 8.9773 2.99677C8.9773 2.80263 8.81991 2.6452 8.62574 2.6452H7.61841C7.42424 2.6452 7.26685 2.80263 7.26685 2.99677V5.38739C7.26685 5.58152 7.42424 5.73895 7.61841 5.73895H8.62574C8.81991 5.73895 8.9773 5.58152 8.9773 5.38739C8.9773 5.19326 8.81991 5.03583 8.62574 5.03583H7.96997V4.54368H8.55146C8.74562 4.54368 8.90302 4.38625 8.90302 4.19211C8.90302 3.99798 8.74562 3.84055 8.55146 3.84055H7.96997V3.34833H8.62574Z"
                  fill="#454545"
                />
                <path
                  d="M14.6422 5.03582C14.4192 5.03582 14.2051 4.94652 14.0696 4.79693C13.9392 4.65304 13.7168 4.64218 13.573 4.77257C13.4291 4.90296 13.4182 5.12529 13.5486 5.26915C13.8192 5.5677 14.2178 5.73894 14.6422 5.73894C15.1715 5.73894 15.6164 5.39919 15.7 4.93109C15.7633 4.57675 15.6051 4.11483 14.9714 3.88111C14.6869 3.77617 14.4213 3.66209 14.3305 3.6224C14.2929 3.58858 14.2924 3.54446 14.2959 3.51953C14.3005 3.48733 14.3247 3.40844 14.4491 3.37096C14.7574 3.27811 15.0486 3.50568 15.0584 3.51348C15.2071 3.63639 15.4273 3.61667 15.5516 3.4688C15.6766 3.32016 15.6573 3.09843 15.5087 2.97348C15.4853 2.95373 14.9264 2.49297 14.2463 2.69772C13.8964 2.80315 13.6487 3.07976 13.5999 3.41962C13.554 3.73975 13.6928 4.04779 13.9623 4.22343C13.9778 4.23355 13.9941 4.24241 14.011 4.24997C14.025 4.25619 14.3557 4.40343 14.7281 4.54075C14.8002 4.56733 15.0333 4.66513 15.0079 4.80748C14.9883 4.91727 14.8429 5.03582 14.6422 5.03582Z"
                  fill="#454545"
                />
                <path
                  d="M10.0883 5.46838C10.1455 5.63049 10.2988 5.73895 10.4704 5.73895C10.4713 5.73895 10.4722 5.73895 10.4731 5.73891C10.6458 5.73775 10.799 5.6269 10.8542 5.46314C10.8552 5.46012 10.8562 5.45706 10.8571 5.454L11.2428 4.19861L11.6268 5.45425C11.6282 5.459 11.6298 5.46371 11.6314 5.46835C11.6886 5.63045 11.8419 5.73891 12.0134 5.73891C12.0143 5.73891 12.0152 5.73891 12.0161 5.73888C12.1888 5.73775 12.3419 5.62694 12.3972 5.46321C12.4022 5.44873 12.4061 5.43389 12.409 5.41885L12.8732 3.06918C12.9108 2.8787 12.7869 2.69378 12.5964 2.65616C12.4059 2.61869 12.221 2.74244 12.1834 2.93295L11.9509 4.10981L11.5791 2.89393C11.5223 2.70823 11.3257 2.60371 11.1401 2.66052C11.0149 2.69881 10.9268 2.8008 10.9 2.92008L10.5344 4.11005L10.3026 2.92894C10.2652 2.73843 10.0804 2.61433 9.88985 2.6517C9.69934 2.68907 9.5752 2.87385 9.61261 3.0644L10.0749 5.41913C10.0782 5.4359 10.0827 5.45235 10.0883 5.46838Z"
                  fill="#454545"
                />
                <path
                  d="M4.18359 14.2798C4.18359 14.4739 4.34099 14.6313 4.53516 14.6313H10.4414C10.6356 14.6313 10.793 14.4739 10.793 14.2798V7.52979C10.793 7.33565 10.6356 7.17822 10.4414 7.17822H4.53516C4.34099 7.17822 4.18359 7.33565 4.18359 7.52979V14.2798ZM4.88672 11.5657L5.92351 10.5289L6.66183 11.2671C6.66193 11.2673 6.66204 11.2674 6.66218 11.2675C6.66229 11.2676 6.66246 11.2677 6.66257 11.2679L9.32287 13.9282H4.88672V11.5657ZM10.0898 13.7008L7.40795 11.019L8.83153 9.59539L10.0898 10.8537V13.7008ZM10.0898 7.88135V9.85927L9.08016 8.84959C8.94287 8.71234 8.72026 8.71234 8.58294 8.84959L6.91077 10.5218L6.1721 9.78309C6.03482 9.64581 5.81221 9.64584 5.67492 9.78309L4.88672 10.5713V7.88135H10.0898Z"
                  fill="#454545"
                />
                <path
                  d="M15.3633 13.9282H12.1992C12.0051 13.9282 11.8477 14.0857 11.8477 14.2798C11.8477 14.4739 12.0051 14.6313 12.1992 14.6313H15.3633C15.5574 14.6313 15.7148 14.4739 15.7148 14.2798C15.7148 14.0857 15.5574 13.9282 15.3633 13.9282Z"
                  fill="#454545"
                />
                <path
                  d="M15.3633 8.86572H12.1992C12.0051 8.86572 11.8477 9.02315 11.8477 9.21729C11.8477 9.41142 12.0051 9.56885 12.1992 9.56885H15.3633C15.5574 9.56885 15.7148 9.41142 15.7148 9.21729C15.7148 9.02315 15.5574 8.86572 15.3633 8.86572Z"
                  fill="#454545"
                />
                <path
                  d="M15.3633 10.5532H12.1992C12.0051 10.5532 11.8477 10.7107 11.8477 10.9048C11.8477 11.0989 12.0051 11.2563 12.1992 11.2563H15.3633C15.5574 11.2563 15.7148 11.0989 15.7148 10.9048C15.7148 10.7107 15.5574 10.5532 15.3633 10.5532Z"
                  fill="#454545"
                />
                <path
                  d="M15.3633 7.17822H12.1992C12.0051 7.17822 11.8477 7.33565 11.8477 7.52979C11.8477 7.72392 12.0051 7.88135 12.1992 7.88135H15.3633C15.5574 7.88135 15.7148 7.72392 15.7148 7.52979C15.7148 7.33565 15.5574 7.17822 15.3633 7.17822Z"
                  fill="#454545"
                />
                <path
                  d="M15.3633 12.2407H12.1992C12.0051 12.2407 11.8477 12.3982 11.8477 12.5923C11.8477 12.7864 12.0051 12.9438 12.1992 12.9438H15.3633C15.5574 12.9438 15.7148 12.7864 15.7148 12.5923C15.7148 12.3982 15.5574 12.2407 15.3633 12.2407Z"
                  fill="#454545"
                />
                <path
                  d="M4.53516 16.6016H15.3633C15.5574 16.6016 15.7148 16.4441 15.7148 16.25C15.7148 16.0559 15.5574 15.8984 15.3633 15.8984H4.53516C4.34099 15.8984 4.18359 16.0559 4.18359 16.25C4.18359 16.4441 4.34099 16.6016 4.53516 16.6016Z"
                  fill="#454545"
                />
                <path
                  d="M16.9453 10.5533C16.8525 10.5533 16.7621 10.5909 16.6968 10.6563C16.6314 10.7217 16.5938 10.812 16.5938 10.9048C16.5938 10.9973 16.6314 11.088 16.6968 11.1534C16.7621 11.2188 16.8525 11.2564 16.9453 11.2564C17.0378 11.2564 17.1285 11.2188 17.1939 11.1534C17.2593 11.088 17.2969 10.9973 17.2969 10.9048C17.2969 10.8124 17.2593 10.7217 17.1939 10.6563C17.1285 10.5909 17.0378 10.5533 16.9453 10.5533Z"
                  fill="#454545"
                />
              </g>
              <defs>
                <clipPath id="clip0_1689_3813">
                  <rect
                    width="18"
                    height="18"
                    fill="white"
                    transform="translate(0 0.5)"
                  />
                </clipPath>
              </defs>
            </svg>

            <div class="item__text">News</div>
          </NuxtLink>
        </section>

        <section
          class="section"
          v-if="user"
        >
          <div class="section__heading">More</div>
          <NuxtLink
            v-if="user"
            to="profile"
            class="item"
          >
            <svg
              class="item__img"
              width="18"
              height="19"
              viewBox="0 0 18 19"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clip-path="url(#clip0_1689_3833)">
                <path
                  d="M5.83594 7.39062C5.83594 9.13529 7.25534 10.5547 9 10.5547C10.7447 10.5547 12.1641 9.13529 12.1641 7.39062C12.1641 5.64596 10.7447 4.22656 9 4.22656C7.25534 4.22656 5.83594 5.64596 5.83594 7.39062ZM11.4609 7.39062C11.4609 8.74759 10.357 9.85156 9 9.85156C7.64304 9.85156 6.53906 8.74759 6.53906 7.39062C6.53906 6.03366 7.64304 4.92969 9 4.92969C10.357 4.92969 11.4609 6.03366 11.4609 7.39062Z"
                  fill="#454545"
                />
                <path
                  d="M15.4688 4.08594C15.6629 4.08594 15.8203 3.92854 15.8203 3.73438C15.8203 3.54021 15.6629 3.38281 15.4688 3.38281C15.2746 3.38281 15.1172 3.54021 15.1172 3.73438C15.1172 3.92854 15.2746 4.08594 15.4688 4.08594Z"
                  fill="#454545"
                />
                <path
                  d="M9 18.5C13.9888 18.5 18 14.4596 18 9.5C18 7.84875 17.5498 6.23455 16.6981 4.83188C16.5974 4.66595 16.3812 4.61311 16.2152 4.71383C16.0492 4.81462 15.9963 5.03083 16.0971 5.19681C16.882 6.48947 17.2969 7.97749 17.2969 9.5C17.2969 11.9057 16.2854 14.137 14.5028 15.7115C13.9601 13.1518 11.6904 11.2578 9 11.2578C6.30956 11.2578 4.03963 13.152 3.49752 15.7118C1.71471 14.1371 0.703125 11.9057 0.703125 9.5C0.703125 4.92508 4.42508 1.20312 9 1.20312C10.8629 1.20312 12.6222 1.80482 14.0877 2.94322C14.241 3.06233 14.4619 3.03455 14.581 2.88124C14.7001 2.72792 14.6724 2.50704 14.519 2.38793C12.929 1.15282 11.0206 0.5 9 0.5C6.59405 0.5 4.33343 1.43572 2.6345 3.13475C0.935613 4.83371 0 7.09426 0 9.5C0 14.4721 4.02395 18.5 9 18.5ZM9 11.9609C11.4854 11.9609 13.5486 13.7764 13.8769 16.2151C12.4547 17.2505 10.7729 17.7969 9 17.7969C7.22728 17.7969 5.54569 17.2505 4.12344 16.215C4.45138 13.7763 6.51428 11.9609 9 11.9609Z"
                  fill="#454545"
                />
              </g>
              <defs>
                <clipPath id="clip0_1689_3833">
                  <rect
                    width="18"
                    height="18"
                    fill="white"
                    transform="translate(0 0.5)"
                  />
                </clipPath>
              </defs>
            </svg>

            <div class="item__text">Profile</div>
          </NuxtLink>
          <div
            class="item"
            v-if="false"
          >
            <svg
              class="item__img"
              width="18"
              height="19"
              viewBox="0 0 18 19"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clip-path="url(#clip0_1689_3839)">
                <path
                  d="M13.971 4.55403C13.8754 4.38848 13.6973 4.28564 13.5061 4.28564H4.36657C4.17539 4.28564 3.99729 4.38848 3.90174 4.55403L3.24948 5.6837C3.17657 5.80998 3.21985 5.97146 3.34613 6.04437C3.47237 6.11728 3.63388 6.07401 3.7068 5.94773L4.20911 5.07772L6.11542 8.37952H2.3028L3.10879 6.98346C3.1817 6.85718 3.13843 6.69568 3.01214 6.6228C2.88586 6.54981 2.72435 6.59316 2.65148 6.71944L1.67603 8.40898C1.58346 8.56926 1.60414 8.76972 1.72739 8.90781L8.61021 16.6166C8.69121 16.7074 8.80744 16.7594 8.92912 16.7595H8.92933C9.0509 16.7595 9.16709 16.7075 9.24816 16.6169L16.145 8.90802C16.2685 8.76993 16.2893 8.56936 16.1966 8.40887L13.971 4.55403ZM9.49337 8.37955H7.03001L8.93632 5.07772L10.8426 8.37955H10.8197C10.6739 8.37955 10.5557 8.49779 10.5557 8.64358C10.5557 8.78941 10.674 8.9076 10.8197 8.9076H10.9469L8.92992 15.7532L6.92518 8.90764H9.49337C9.6392 8.90764 9.7574 8.78941 9.7574 8.64361C9.75743 8.49779 9.6392 8.37955 9.49337 8.37955ZM11.3 8.11553L9.39367 4.81369H13.2063L11.3 8.11553ZM11.4975 8.90764H15.4367L9.56305 15.473L11.4975 8.90764ZM15.5699 8.37955H11.7573L13.6636 5.07775L15.5699 8.37955ZM4.66642 4.81369H8.47905L6.57273 8.1155L4.66642 4.81369ZM6.37491 8.90764L8.29792 15.474L2.43516 8.90764H6.37491Z"
                  fill="#454545"
                />
                <path
                  d="M15.3263 15.7753C15.3137 15.7669 15.3005 15.7597 15.2866 15.7535C15.119 15.6794 14.9644 15.5918 14.8272 15.4934C14.7088 15.4083 14.5438 15.4355 14.4587 15.5539C14.3737 15.6724 14.4008 15.8374 14.5193 15.9224C14.5998 15.9802 14.6849 16.0347 14.774 16.0857C14.2038 16.411 13.8083 16.8772 13.6147 17.4535C13.421 16.8773 13.0256 16.4112 12.4555 16.0858C13.0256 15.7604 13.421 15.2943 13.6147 14.718C13.6174 14.726 13.6201 14.7339 13.6228 14.7418C13.6708 14.8795 13.8212 14.9522 13.959 14.9043C14.0967 14.8564 14.1695 14.7059 14.1215 14.5681C14.1015 14.5106 14.0838 14.4508 14.069 14.3904L13.9593 13.9421C13.9203 13.7828 13.7786 13.6716 13.6147 13.6716C13.4507 13.6716 13.309 13.7828 13.27 13.9421L13.1603 14.3904C12.9732 15.1546 12.3948 15.5535 11.9426 15.7536C11.9288 15.7597 11.9156 15.767 11.903 15.7754C11.7989 15.8447 11.7368 15.9608 11.7368 16.0858C11.7368 16.2109 11.7989 16.3269 11.903 16.3963C11.9155 16.4047 11.9288 16.412 11.9426 16.4181C12.3948 16.6181 12.9732 17.0171 13.1603 17.7813L13.27 18.2296C13.309 18.3889 13.4507 18.5001 13.6147 18.5001C13.7786 18.5001 13.9203 18.3889 13.9593 18.2296L14.069 17.7813C14.2561 17.0171 14.8345 16.6182 15.2867 16.4181C15.3005 16.412 15.3137 16.4047 15.3263 16.3963C15.4304 16.327 15.4925 16.2109 15.4925 16.0858C15.4925 15.9608 15.4303 15.8447 15.3263 15.7753Z"
                  fill="#454545"
                />
                <path
                  d="M16.5785 4.14416C16.5659 4.13576 16.5527 4.12848 16.5388 4.12236C16.2463 3.99295 16.0647 3.79154 15.9992 3.52372L15.9439 3.29767C15.9098 3.15866 15.786 3.06152 15.643 3.06152C15.643 3.06152 15.6429 3.06152 15.6429 3.06152C15.4998 3.06156 15.376 3.1587 15.3421 3.29767L15.2867 3.52372C15.2211 3.79154 15.0396 3.99295 14.747 4.12236C14.7332 4.12848 14.7199 4.13576 14.7073 4.14416C14.6184 4.20347 14.5653 4.30275 14.5653 4.40966C14.5653 4.51657 14.6185 4.61582 14.7074 4.67509C14.72 4.68346 14.7332 4.69073 14.747 4.69685C15.0396 4.82626 15.2211 5.02767 15.2867 5.29553L15.3421 5.52151C15.3761 5.66055 15.4998 5.75766 15.6429 5.75769H15.643C15.7861 5.75769 15.9098 5.66063 15.9439 5.52155L15.9992 5.29553C16.0648 5.02771 16.2464 4.8263 16.5389 4.69689C16.5527 4.69077 16.5659 4.68353 16.5785 4.67513C16.6675 4.61585 16.7206 4.51661 16.7206 4.4097C16.7206 4.30271 16.6675 4.20347 16.5785 4.14416ZM15.6429 4.78942C15.5548 4.64447 15.4387 4.5171 15.2966 4.40963C15.4387 4.30215 15.5549 4.17478 15.643 4.02983C15.7311 4.17478 15.8472 4.30215 15.9893 4.40963C15.8471 4.5171 15.731 4.64443 15.6429 4.78942Z"
                  fill="#454545"
                />
                <path
                  d="M2.30962 3.55866L2.3889 3.88245C2.42511 4.03036 2.55677 4.13368 2.70903 4.13368C2.86133 4.13368 2.99299 4.03036 3.02916 3.88245L3.10844 3.55866C3.23648 3.03575 3.63469 2.76171 3.94625 2.62386C3.96006 2.61774 3.97332 2.61046 3.98587 2.60206C4.08146 2.53836 4.13852 2.43173 4.13852 2.31687C4.13852 2.20198 4.08149 2.09536 3.9859 2.03162C3.97332 2.02321 3.96006 2.01594 3.94621 2.00982C3.63469 1.87201 3.23648 1.59796 3.10844 1.07505L3.02916 0.751262C2.99295 0.603324 2.86129 0.5 2.70899 0.5C2.55673 0.5 2.42507 0.603324 2.38886 0.751227L2.30958 1.07502C2.18162 1.59793 1.78337 1.87197 1.47185 2.00979C1.45803 2.0159 1.44474 2.02318 1.43219 2.03158C1.33656 2.09536 1.27954 2.20198 1.27954 2.31687C1.27954 2.43177 1.33663 2.53839 1.43222 2.6021C1.44478 2.61046 1.45803 2.61774 1.47181 2.62386C1.78337 2.76167 2.18162 3.03575 2.30962 3.55866ZM2.70899 1.52878C2.85451 1.84729 3.08953 2.11357 3.4047 2.31684C3.08956 2.52011 2.85451 2.78642 2.70899 3.10494C2.56348 2.78642 2.32843 2.52015 2.01329 2.31684C2.32843 2.11357 2.56348 1.84726 2.70899 1.52878Z"
                  fill="#454545"
                />
              </g>
              <defs>
                <clipPath id="clip0_1689_3839">
                  <rect
                    width="18"
                    height="18"
                    fill="white"
                    transform="translate(0 0.5)"
                  />
                </clipPath>
              </defs>
            </svg>

            <div class="item__text">Premium</div>
          </div>
        </section>

        <div class="nav__badge"></div>

        <template v-if="!user">
          <div
            class="nav__register"
            @click="isNavExpanded = false; $togglePopup('SignInPopup')"
          >Register</div>
          <div
            class="nav__login"
            @click="isNavExpanded = false; $togglePopup('SignInPopup')"
          >Log in</div>
        </template>
        <NuxtLink
          v-else
          to="profile"
          class="nav__user"
        >
          <img
            class="nav__user-avatar"
            :src="user.avatar"
          />
          <div class="nav__user-name">{{ user.username || user.email }}</div>
        </NuxtLink>
      </nav>

      <main class="main">
        <header class="header">
          <div class="header__duck">
            <img
              class="header__duck-img"
              src="@/assets/imgs/newLobby/header-duck.png"
            />
            <div class="header__duck-text">{{ duckText }}</div>
          </div>

          <div class="header__games">
            <div class="animation">
              <div class="animation__dot"></div>
              <div class="animation__bg"></div>
            </div>
            <div class="header__games-text">{{ lobby?.totalGamesCount }} games played</div>
          </div>

          <svg
            @click="isNavExpanded = true"
            class="header__burger"
            width="25"
            height="15"
            viewBox="0 0 25 15"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <rect
              width="25"
              height="1.66667"
              rx="0.833333"
              fill="white"
            />
            <rect
              y="6.66667"
              width="25"
              height="1.66667"
              rx="0.833333"
              fill="white"
            />
            <rect
              y="13.3333"
              width="25"
              height="1.66667"
              rx="0.833333"
              fill="white"
            />
          </svg>
        </header>

        <div class="banners">
          <div
            class="banners__arrow banners__arrow--prev"
            @click="changeSlide(-1)"
          >&lt;</div>
          <div class="banners__container">
            <div
              class="banners__container-inner"
              :style="`transform: translateX(${-100 * currSlide}%)`"
            >
              <NuxtLink
                v-for="banner in lobby?.banners"
                class="banner"
                :to="banner?.link"
              >
                <img
                  class="banner__bg"
                  :src="banner.image"
                />
                <div
                  class="banner__text"
                  v-if="banner?.button?.title"
                >{{ banner.button.title }}</div>
              </NuxtLink>
            </div>
          </div>
          <div
            class="banners__arrow banners__arrow--next"
            @click="changeSlide(1)"
          >&gt;</div>
        </div>

        <section class="section">
          <div class="section__heading">Play</div>

          <div class="games">
            <div
              class="game"
              id="game-1"
              @click="settingsPreset = 'Anyone'; user ? $togglePopup('GameSettingsPopup') : $togglePopup('SignInPopup')"
            >
              <div class="game__heading">New game</div>
              <div class="game__action">Create game</div>
            </div>
            <div
              class="game"
              id="game-2"
              @click="settingsPreset = 'AI'; user ? $togglePopup('GameSettingsPopup') : $togglePopup('SignInPopup')"
            >
              <div class="game__heading">Play with AI</div>
              <div class="game__action">Play bot</div>
            </div>
            <div
              class="game"
              id="game-3"
              @click="settingsPreset = 'Friend'; user ? $togglePopup('GameSettingsPopup') : $togglePopup('SignInPopup')"
            >
              <div class="game__heading">Play a Friend</div>
              <div class="game__action">Play now</div>
            </div>
            <NuxtLink
              class="game"
              to="events/arena"
              id="game-4"
            >
              <div class="game__heading">Arena</div>
              <div class="game__action">Compete now</div>
            </NuxtLink>
          </div>
        </section>

        <section
          class="section-2"
          v-if="useUserStore()?.getUser?.value?.id"
        >
          <section class="section section--half">
            <div class="section__heading">Rating</div>

            <div class="rating">
              <template v-if="lobby?.user.rating != null">
                <div class="rating__heading">{{ lobby?.user?.rank?.rank }}</div>
                <div class="rating__leaderboard">Leaderboard position</div>
                <div class="rating__position">
                  #{{ lobby?.user?.leaderboard?.position }}
                  <span class="rating__position--gray">/ {{ lobby?.user?.leaderboard?.total }}</span>
                </div>
              </template>
              <template v-else>
                <div class="rating__heading">{rank}</div>
                <div class="rating__leaderboard">
                  You have to win {{ lobby?.user.rank.gamesLeftTillRank }} more ranked {{
                    lobby?.user.rank.gamesLeftTillRank == 1 ? 'game' : 'games' }} to get your rank
                </div>
                <div class="rating__position">
                  {{ 30 - lobby?.user.rank.gamesLeftTillRank }}
                  <span class="rating__position--gray">/ 30</span>
                </div>
              </template>
            </div>
          </section>
          <section class="section section--half">
            <div class="section__heading">Active games</div>

            <div class="active-games">
              <template v-if="lobby?.activeGames?.length">
                <div
                  v-for="(game, counter) in lobby?.activeGames"
                  class="active-game"
                >
                  <div
                    v-if="counter != 0"
                    class="active-game__hr"
                  ></div>
                  <div class="active-game__name">{{ game.title }}</div>
                  <div
                    class="active-game__btn"
                    @click="navigateTo(`game/${game.gameId}`)"
                  >Open</div>
                </div>
              </template>
              <div
                class="active-games__empty"
                v-else
              >
                <NoGamesIcon></NoGamesIcon>
                No active games
              </div>
            </div>
          </section>
        </section>

        <section class="section">
          <div class="section__heading">Leaderboard</div>

          <div class="leaderboard">
            <div class="leaderboard__heading">
              <div>#</div>
              <div>Username</div>
              <div>W - D - L</div>
              <div>Rating</div>
              <div>Rank</div>
            </div>

            <div
              class="leaderboard__row"
              v-for="(row, counter) in leaderboard"
              :key="row.userId"
            >
              <div>{{ counter + 1 }}</div>
              <div class="leaderboard__user">
                <img
                  v-if="row.user.avatar"
                  :src="row.user.avatar"
                  class="leaderboard__user-image"
                />
                {{ row.user.username }}
              </div>
              <div>{{ row.winsCount }} - {{ row.drawsCount }} - {{ row.losesCount }}</div>
              <div>{{ row.rating || "{hidden}" }}</div>
              <div>{{ row.rank || "{hidden}" }}</div>
            </div>
          </div>
        </section>

        <div class="main__hr"></div>

        <footer class="footer">
          <div class="footer__item">
            <div class="footer__item-heading">Platform</div>
            <NuxtLink
              to="https://twitter.com/danger_valley"
              class="footer__item-text footer__item-text--mobile"
            >Twitter</NuxtLink>
            <NuxtLink
              to="https://discord.com/invite/dangervalley"
              class="footer__item-text footer__item-text--mobile"
            >Discord</NuxtLink>
            <NuxtLink
              to="https://docs.xchess.io/"
              class="footer__item-text"
            >Wiki</NuxtLink>
            <div
              class="footer__item-text"
              style="cursor: pointer;"
              v-if="user"
              @click="useUserStore().logout"
            >Log out</div>
          </div>
          <div class="footer__item">
            <div class="footer__item-heading">Support</div>
            <NuxtLink
              to="mailto:support@xchess.io"
              class="footer__item-text"
            >Contact Us</NuxtLink>
            <NuxtLink
              to="https://docs.xchess.io/privacy-policy"
              class="footer__item-text"
            >Privacy Policy</NuxtLink>
            <NuxtLink
              to="https://docs.xchess.io/terms-of-service"
              class="footer__item-text"
            >Terms of Use</NuxtLink>
          </div>
          <div class="footer__item footer__item--desktop">
            <div class="footer__item-heading">Community</div>
            <NuxtLink
              to="https://twitter.com/danger_valley"
              class="footer__item-text"
            >Twitter</NuxtLink>
            <NuxtLink
              to="https://discord.com/invite/dangervalley"
              class="footer__item-text"
            >Discord</NuxtLink>
          </div>
          <div class="footer__banner">
            <img
              class="footer__banner-img"
              src="@/assets/imgs/newLobby/footer-crown.png"
            />
            <div class="footer__banner-heading">Submit application</div>
            <div class="footer__banner-text">Want to make a partnership? Have an idea or offer?<br />Contact us!</div>
            <NuxtLink
              to="https://discord.gg/dangervalley"
              class="footer__banner-action"
            >Submit</NuxtLink>
          </div>
        </footer>
      </main>

      <PopupsSetUsername />
      <PopupsSignIn />
      <PopupsLobbySearch ref="GameSearchPopupRef" />
      <PopupsLobbySettings
        ref="GameSettingsPopupRef"
        :preset="settingsPreset"
        @play-now="openGameSearchPopup"
      />
    </div>
  </ClientOnly>
</template>

<script setup>
import NoGamesIcon from "@/assets/imgs/no-icon.svg"
import { useUserStore } from "~/stores/user";

useHead({
  title: 'Lobby - xChess',
  meta: [
    {
      property: 'og:title',
      content: 'Lobby - xChess'
    }, {
      property: 'twitter:title',
      content: 'Lobby - xChess'
    }, {
      property: 'description',
      content: 'xChess - web3-powered community-driven chess platform on Solana blockchain'
    }, {
      property: 'og:description',
      content: 'xChess - web3-powered community-driven chess platform on Solana blockchain'
    }, {
      property: 'og:url',
      content: 'xchess.io' + useRequestURL().pathname
    }
  ]
})

let { $togglePopup, $API, $showToast } = useNuxtApp();

let lobby = ref(),
  leaderboard = ref(),
  duckText = ref("Great day for a chess game!"),
  currSlide = ref(0),
  isNavExpanded = ref(false),
  settingsPreset = ref("Anyone"),
  GameSearchPopupRef = ref(),
  GameSettingsPopupRef = ref()

const user = computed(() => useUserStore().getUser.value)

watch(isNavExpanded, () => {
  console.log(isNavExpanded.value);
  document.body.classList.toggle('no-overflow');
})

const changeSlide = (direction) => {
  console.log(currSlide.value, direction);

  if (direction == -1 && currSlide.value == 0) return currSlide.value = lobby.value.banners?.length - 1 || 0;
  if (direction == 1 && currSlide.value == lobby.value.banners?.length - 1) return currSlide.value = 0;

  currSlide.value += direction;
}

const createFastGame = async () => {
  let body = {
    mode: "300_0",
    accessToken: localStorage.getItem('accessToken'),
    everyoneCanJoin: true,
    isAI: false
  }
  let resp = await $API().Chess.find_create(body);
  body = await resp.json();
  console.log(body);
  if (body.errors) {
    return $showToast(body.errors[0].message, 'error')
  }
  await navigateTo(`game/${body.game.id}`)
}

const openGameSearchPopup = async () => {
  //localStorage.setItem('autoJoin', true);
  $togglePopup('GameSearchPopup')
  GameSearchPopupRef.value.startTimeTracking()
  let body = {
    mode: GameSettingsPopupRef.value.gameMode,
    accessToken: localStorage.getItem('accessToken'),
    everyoneCanJoin: GameSettingsPopupRef.value.playWith == 0,
    isAI: GameSettingsPopupRef.value.playWith == 2
  }
  if (GameSettingsPopupRef.value.color) body = {
    ...body,
    color: GameSettingsPopupRef.value.color
  }
  let resp = await $API().Chess.find_create(body);
  body = await resp.json();
  console.log(body);
  if (body.errors) {
    return $showToast(body.errors[0].message, 'error')
  }
  await navigateTo(`game/${body.game.id}`)
}

const swipeBanner = () => {
  let startPos = null

  document.querySelector('.banners').addEventListener("touchstart", (e) => {
    startPos = e.changedTouches[0].clientX;
  })
  document.querySelector('.banners').addEventListener("touchend", (e) => {
    let diff = startPos - e.changedTouches[0].clientX;

    if (Math.abs(diff) > 20) changeSlide(Math.sign(diff));
  })
}

onMounted(async () => {
  console.log(useNuxtApp().ssrContext?.event.node.req.headers, useRequestURL());

  if (useUserStore()?.getUser?.value?.id && !useUserStore()?.getUser?.value?.username) $togglePopup('SetUsernamePopup')

  let resp = await $API().Lobby.get(localStorage.getItem('accessToken'));
  let body = await resp.json();
  console.log(body);

  if (body.errors) {
    console.error(body.errors);
    return $showToast(body.errors[0].message, 'error')
  }

  lobby.value = body;

  resp = await $API().Lobby.getLeaderboard(localStorage.getItem('accessToken'));
  body = await resp.json();
  console.log(body);

  if (body.errors) {
    console.error(body.errors);
    return $showToast(body.errors[0].message, 'error')
  }

  leaderboard.value = body.participants;

  swipeBanner();
})
</script>

<style lang="scss" scoped>
.page {
  padding: 20px;
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  align-items: flex-start;
  overflow: initial;
}

.nav {
  position: sticky;
  top: 20px;
  width: 220px;
  z-index: 10;
  height: calc(100vh - 40px);
  display: flex;
  flex-direction: column;
  gap: 20px;
  padding: 18px 10px 12px 10px;
  border-radius: 20px;
  background: #1A1E23;
  backdrop-filter: blur(50px);

  .logo {
    color: #FFF;
    font-family: "Space Mono";
    font-style: normal;
    font-weight: 400;

    &__heading {
      font-size: 16px;
      line-height: 16px;
      margin-bottom: 3px;
    }

    &__underheading {
      font-size: 10px;
      line-height: 10px;
    }
  }

  &__cross {
    display: none;
    cursor: pointer;
  }

  &__hr {
    width: 100%;
    height: 1px;
    background: #313539;
  }

  .section {
    display: flex;
    flex-direction: column;
    gap: 15px;

    &__heading {
      color: #ffffff4d;
      font-family: "Space Mono";
      font-size: 12px;
      font-style: normal;
      font-weight: 400;
      line-height: 12px;
      text-transform: uppercase;
    }

    .item {
      display: flex;
      flex-direction: row;
      gap: 6px;
      align-items: center;
      cursor: pointer;

      &__img {
        width: 18px;
        height: 18px;
      }

      &__text {
        color: #FFF;
        font-family: "Space Mono";
        font-size: 14px;
        font-style: normal;
        font-weight: 400;
        line-height: normal;
      }

      &__soon {
        color: #454545;
        font-family: "Space Mono";
        font-size: 14px;
        font-style: normal;
        font-weight: 400;
        line-height: normal;
        margin-left: auto;
      }

      &--inactive {
        .item__text {
          color: #454545;
        }
      }
    }
  }

  &__banner {
    width: 100%;
    height: 84px;
    border-radius: 10px;
    cursor: pointer;
    object-fit: cover;
  }

  &__badge {
    width: 100%;
    height: 44px;
    margin-top: auto;
    margin-bottom: -10px;
    cursor: pointer;
  }

  &__register {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 66px;
    border-radius: 10px;
    border: 1px solid rgba(255, 255, 255, 0.10);
    cursor: pointer;
    margin-bottom: -13px;

    color: #FFF;
    text-align: center;
    font-family: "Space Mono";
    font-size: 14px;
    font-style: normal;
    font-weight: 400;
    line-height: normal;
  }

  &__login {
    color: #FFF;
    text-align: center;
    font-family: "Space Mono";
    font-size: 14px;
    font-style: normal;
    font-weight: 400;
    line-height: normal;
  }

  &__user {
    display: flex;
    flex-direction: row;
    align-items: center;
    padding: 10px;
    gap: 15px;
    border-radius: 10px;
    border: 1px solid rgba(255, 255, 255, 0.10);

    &-avatar {
      width: 46px;
      aspect-ratio: 1;
      clip-path: path("M44.4479 17.3353C42.7694 13.8055 40.812 10.4152 38.5943 7.19667L37.879 6.16855C36.9983 4.89085 35.8441 3.82536 34.5002 3.04955C33.1563 2.27374 31.6562 1.80707 30.1094 1.68347L28.8536 1.58227C24.9573 1.26945 21.0425 1.26945 17.1464 1.58227L15.8905 1.68347C14.3437 1.80707 12.8438 2.27374 11.4998 3.04955C10.1559 3.82536 9.00162 4.89085 8.12098 6.16855L7.40566 7.20587C5.18801 10.4244 3.2306 13.8147 1.55205 17.3445L1.01153 18.4807C0.345543 19.8821 0 21.4142 0 22.9658C0 24.5174 0.345543 26.0495 1.01153 27.4509L1.55205 28.5871C3.2306 32.117 5.18801 35.5072 7.40566 38.7257L8.12098 39.763C9.00162 41.0407 10.1559 42.1063 11.4998 42.8821C12.8438 43.6579 14.3437 44.1246 15.8905 44.2481L17.1464 44.3493C21.0425 44.6621 24.9573 44.6621 28.8536 44.3493L30.1094 44.2481C31.6574 44.123 33.1581 43.6542 34.5021 42.8759C35.8462 42.0976 36.9997 41.0294 37.879 39.7492L38.5943 38.7119C40.812 35.4934 42.7694 32.1032 44.4479 28.5733L44.9884 27.4371C45.6543 26.0357 46 24.5036 46 22.952C46 21.4004 45.6543 19.8683 44.9884 18.4669L44.4479 17.3353Z");
    }

    &-name {
      color: #FFF;
      font-family: Space Mono;
      font-size: 14px;
      font-style: normal;
      font-weight: 400;
      line-height: normal;
      text-wrap: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }
}

.main {
  width: 844px;
  margin: 0 auto;

  .header {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;

    &__duck {
      display: flex;
      flex-direction: row;
      align-items: flex-end;

      &-img {
        width: 26px;
        height: 26px;
      }

      &-text {
        position: relative;
        padding: 10px;
        border-radius: 10px 10px 10px 0px;
        background: #202227;
        margin-left: 9px;
        color: #FFF;
        font-family: "Space Mono";
        font-size: 12px;
        font-style: normal;
        font-weight: 400;

        &::before {
          content: "";
          position: absolute;
          left: -7px;
          bottom: 0;
          width: 7px;
          height: 7px;
          clip-path: polygon(100% 0, 0% 100%, 100% 100%);
          z-index: 1;
          background-color: #202227;
        }
      }
    }

    &__games {
      display: flex;
      flex-direction: row;
      gap: 8px;

      .animation {
        @keyframes fadeOut {
          from {
            transform: scale(0);
            opacity: 1;
          }

          to {
            transform: scale(1.5);
            opacity: 0;
          }
        }

        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        width: 19px;
        height: 19px;

        &__dot {
          width: 7px;
          height: 7px;
          border-radius: 100%;
          background: #FFBF2E;
        }

        &__bg {
          width: 100%;
          height: 100%;
          position: absolute;
          border-radius: 100%;
          background: #ffbf2e;
          animation-name: fadeOut;
          animation-duration: 2s;
          animation-fill-mode: forwards;
          animation-iteration-count: infinite;
        }
      }

      &-text {
        color: #FFF;
        font-family: "Space Mono";
        font-size: 12px;
        font-style: normal;
        font-weight: 400;
      }
    }

    &__burger {
      display: none;
      cursor: pointer;
    }
  }

  .banner {
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    min-width: 100%;
    height: 220px;

    &s {
      position: relative;
      display: flex;
      flex-direction: row;
      width: 100%;
      height: 220px;
      margin-bottom: 40px;

      &__arrow {
        position: absolute;
        top: calc((100% - 35px) / 2);
        display: flex;
        justify-content: center;
        align-items: center;
        width: 35px;
        height: 35px;
        border-radius: 50%;
        color: #fff;
        background-color: #333538;
        cursor: pointer;
        z-index: 2;

        &--prev {
          left: calc(35px / -2);
        }

        &--next {
          right: calc(35px / -2);
        }
      }

      &__container {
        display: flex;
        overflow: hidden;
        gap: 100%;

        &-inner {
          display: flex;
          flex-direction: row;
          transition: .25s ease-in-out;
        }
      }
    }

    &__bg {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 10px;
    }

    &__text {
      position: absolute;
      left: 14px;
      bottom: 14px;
      padding: 20px 13px;
      border-radius: 10px;
      background: rgba(19, 28, 43, 0.10);
      backdrop-filter: blur(50px);

      color: #FFF;
      text-align: center;
      font-family: "Space Mono";
      font-size: 14px;
      font-style: normal;
      font-weight: 400;
      line-height: 14px;
    }
  }

  .section {
    margin-bottom: 40px;

    &__heading {
      color: #FFF;
      font-family: "Space Mono";
      font-size: 14px;
      font-style: normal;
      font-weight: 400;
      line-height: 14px;
      text-transform: uppercase;
    }

    &--half {
      width: 50%;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .game {
      position: relative;
      width: 100%;
      height: 161px;
      border-radius: 10px;
      background: rgba(31, 36, 42, 0.40);
      backdrop-filter: blur(50px);
      overflow: hidden;
      cursor: pointer;

      &s {
        width: 100%;
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        margin-top: 15px;
        gap: 10px;
      }

      &__heading {
        position: absolute;
        left: 14px;
        top: 14px;
        color: #FFF;
        font-family: "Space Mono";
        font-size: 16px;
        font-style: normal;
        font-weight: 700;
        line-height: 16px;
      }

      &__action {
        position: absolute;
        left: 0;
        bottom: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 44px;
        background: rgba(0, 0, 0, 0.10);
        backdrop-filter: blur(12px);

        color: #FFF;
        text-align: center;
        font-family: "Space Mono";
        font-size: 14px;
        font-style: normal;
        font-weight: 400;
        line-height: 14px;
      }
    }

    #game {
      &-1 {
        background-image: url("@/assets/imgs/newLobby/games-new.png");
        background-size: cover;
      }

      &-2 {
        background-image: url("@/assets/imgs/newLobby/games-AI.png");
        background-size: cover;
      }

      &-3 {
        background-image: url("@/assets/imgs/newLobby/games-friend.png");
        background-size: cover;
      }

      &-4 {
        background-image: url("@/assets/imgs/newLobby/games-arena.png");
        background-size: cover;
      }
    }

    .leaderboard {
      display: flex;
      flex-direction: column;
      gap: 8px;
      justify-content: space-between;
      padding: 0 16px;
      margin-top: 25px;

      // to inherit
      grid-template-columns: 50px 167px 167px 167px auto;

      &__heading {
        display: grid;
        grid-template-columns: inherit;
        gap: 20px;
        color: #FFF;
        font-variant-numeric: lining-nums tabular-nums;
        font-family: Space Mono;
        font-size: 16px;
        font-style: normal;
        font-weight: 700;
        line-height: 140%;
        text-transform: capitalize;
      }

      &__row {
        display: grid;
        grid-template-columns: inherit;
        gap: 20px;
        color: #FFF;
        font-variant-numeric: lining-nums tabular-nums;
        font-family: Space Mono;
        font-size: 14px;
        font-style: normal;
        font-weight: 400;
        line-height: 140%;
      }

      &__user {
        display: flex;
        flex-direction: row;
        align-items: center;

        &-image {
          margin-right: 9px;
          width: 21px;
          height: 21px;
          clip-path: path("M20.2914 7.91393C19.5251 6.30251 18.6316 4.75477 17.6191 3.28544L17.2926 2.81608C16.8905 2.23278 16.3636 1.74636 15.7501 1.39219C15.1366 1.03801 14.4518 0.824969 13.7456 0.768542L13.1723 0.722341C11.3936 0.579532 9.60636 0.579532 7.82769 0.722341L7.25437 0.768542C6.54819 0.824969 5.86345 1.03801 5.24991 1.39219C4.63637 1.74636 4.10944 2.23278 3.7074 2.81608L3.38085 3.28964C2.36844 4.75897 1.47484 6.30671 0.708543 7.91813L0.461788 8.43684C0.157748 9.07661 0 9.77605 0 10.4844C0 11.1927 0.157748 11.8921 0.461788 12.5319L0.708543 13.0506C1.47484 14.6621 2.36844 16.2098 3.38085 17.6791L3.7074 18.1527C4.10944 18.736 4.63637 19.2224 5.24991 19.5766C5.86345 19.9308 6.54819 20.1438 7.25437 20.2002L7.82769 20.2464C9.60636 20.3892 11.3936 20.3892 13.1723 20.2464L13.7456 20.2002C14.4523 20.1431 15.1374 19.9291 15.7509 19.5738C16.3646 19.2185 16.8912 18.7308 17.2926 18.1464L17.6191 17.6728C18.6316 16.2035 19.5251 14.6558 20.2914 13.0443L20.5382 12.5256C20.8422 11.8858 21 11.1864 21 10.4781C21 9.76975 20.8422 9.07031 20.5382 8.43054L20.2914 7.91393Z");
        }
      }
    }
  }

  .section-2 {
    display: flex;
    flex-direction: row;
    gap: 10px;
  }

  .rating {
    height: 161px;
    border-radius: 10px;
    background: rgba(255, 255, 255, 0.05);
    padding: 17px 20px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;

    &__heading {
      color: $color1;
      font-family: Space Mono;
      font-size: 40px;
      font-style: normal;
      font-weight: 400;
      line-height: 40px;
    }

    &__leaderboard {
      color: #FFFFFF4d;
      font-family: Space Mono;
      font-size: 16px;
      font-style: normal;
      font-weight: 400;
      line-height: 16px;
    }

    &__position {
      color: #FFF;
      font-family: Space Mono;
      font-size: 22px;
      font-style: normal;
      font-weight: 700;
      line-height: 22px;

      &--gray {
        color: #66676B;
        font-weight: 400;
      }
    }
  }

  .active-game {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;

    &s {
      height: 161px;
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.05);
      display: flex;
      flex-direction: column;
      padding: 17px 20px;

      &__empty {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        gap: 10px;
        align-items: center;
        justify-content: center;

        color: #FFFFFF4d;
        text-align: center;
        font-family: Space Mono;
        font-size: 16px;
        font-style: normal;
        font-weight: 400;
        line-height: 16px;
      }
    }

    &__hr {
      width: 100%;
      height: 1px;
      margin-bottom: 17px;
      background: #2C2E32;
    }

    &__name {
      color: #FFF;
      font-size: 16px;
      font-family: "Space Mono";
      font-style: normal;
      font-weight: 400;
      line-height: normal;
    }

    &__btn {
      padding: 6px 10px;
      border-radius: 10px;
      background-color: $color1;
      color: $color-font;
      font-size: 12px;
      font-family: "Space Mono";
      font-style: normal;
      font-weight: 400;
      line-height: normal;
      cursor: pointer;
    }
  }

  &__hr {
    width: 100%;
    height: 1px;
    color: #ffffff1a;
  }

  .footer {
    margin-top: 40px;
    display: flex;
    flex-direction: row;
    justify-content: space-between;

    &__item {
      display: flex;
      flex-direction: column;
      gap: 12px;

      &-heading {
        color: #ffffff4d;
        font-family: Space Mono;
        font-size: 14px;
        font-style: normal;
        font-weight: 700;
        line-height: 14px;
      }

      &-text {
        color: #FFF;
        font-family: Space Mono;
        font-size: 14px;
        font-style: normal;
        font-weight: 400;
        line-height: 14px;

        &--mobile {
          display: none;
        }
      }
    }

    &__banner {
      display: grid;
      grid-template-columns: auto 70px;
      width: 308px;
      min-height: 139px;
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.05);
      overflow: hidden;

      &-img {
        grid-column: 2;
        grid-row: 1 / span 2;
        width: 100%;
      }

      &-heading {
        padding: 10px;
        color: #FFF;
        font-family: Space Mono;
        font-size: 16px;
        font-style: normal;
        font-weight: 700;
        line-height: 16px;
      }

      &-text {
        margin: 4px 0 6px 10px;
        color: #ffffff80;
        font-family: Space Mono;
        font-size: 12px;
        font-style: normal;
        font-weight: 400;
        line-height: 150%;
      }

      &-action {
        display: flex;
        justify-content: center;
        align-items: center;
        grid-column: 1 / span 2;
        grid-row: 3;
        width: 100%;
        height: 39px;
        margin-top: auto;
        background: rgba(255, 255, 255, 0.10);
        backdrop-filter: blur(35px);
        color: #FFF;
        text-align: center;
        font-family: Space Mono;
        font-size: 14px;
        font-style: normal;
        font-weight: 400;
        line-height: 14px;
        cursor: pointer;
      }
    }
  }
}

@media screen and (max-width: 1200px) {
  .page {
    padding: 0;
    overflow-x: hidden;
  }

  .nav {
    position: absolute;
    top: 0;
    left: 100vw;
    z-index: 1000;
    width: 100vw;
    height: 100vh;
    transition: .5s;
    padding: 38px 30px;

    &--expanded {
      left: 0;
      overflow-y: auto;
      border-radius: 0;
    }

    &__cross {
      display: block;
      position: absolute;
      z-index: 1001;
      right: 30px;
      top: 43px;
    }

    &__badge {
      order: 2;
    }
  }

  .main {
    width: 100vw;
    padding: 10px;

    .header {
      padding: 0 5px;

      &__games {
        display: none;
      }

      &__burger {
        display: block;
      }
    }

    .banner {
      &s {
        &__arrow {
          display: none;
        }
      }
    }

    .section {
      .game {
        width: calc((100% - 10px) / 2);

        &s {
          flex-wrap: wrap;
        }
      }

      &-2 {
        flex-direction: column;
        gap: 20px;
        margin-bottom: 40px;
      }

      &--half {
        width: 100%;
        margin-bottom: unset;
      }

      .leaderboard {
        overflow-x: auto;
        grid-template-columns: 50px 167px 167px 167px 167px;
      }
    }

    .footer {
      flex-wrap: wrap;
      gap: 24px 0;

      &__item {
        &--desktop {
          display: none;
        }

        &-text {
          &--mobile {
            display: block;
          }
        }
      }

      &__banner {
        width: 100%;
      }
    }
  }
}
</style>